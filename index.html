<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indonesia Population Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { padding: 20px; }
        .card { margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .province-flag { width: 32px; height: 32px; object-fit: cover; margin-right: 10px; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4 text-center">ðŸ‡®ðŸ‡© Indonesia Population Dashboard</h1>
        
        <div class="card">
            <div class="card-body text-center">
                <h5 class="card-title">Total Population</h5>
                <h2 class="text-primary" id="totalPopulation">-</h2>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        Provincial Population
                    </div>
                    <div class="card-body">
                        <canvas id="provinceChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-info text-white">
                        Regency/City Data
                    </div>
                    <div class="card-body">
                        <select id="provinceSelect" class="form-select mb-3">
                            <option value="">Select Province</option>
                        </select>
                        <div class="table-responsive">
                            <table class="table table-striped" id="regencyTable">
                                <thead>
                                    <tr>
                                        <th>Kabupaten/Kota</th>
                                        <th>Population</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td colspan="2">Loading data...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data Indonesia (contoh data sederhana)
        const indonesiaData = {
            totalPopulation: 273523615,
            provinces: [
                {
                    name: "DKI Jakarta",
                    population: 10677000,
                    regencies: [
                        { name: "Jakarta Pusat", population: 1010000 },
                        { name: "Jakarta Barat", population: 2478000 },
                        { name: "Jakarta Selatan", population: 2273000 },
                        { name: "Jakarta Timur", population: 2891000 },
                        { name: "Jakarta Utara", population: 1798000 }
                    ]
                },
                {
                    name: "Jawa Barat",
                    population: 43053732,
                    regencies: [
                        { name: "Bandung", population: 3475000 },
                        { name: "Bekasi", population: 2930000 },
                        { name: "Bogor", population: 2152000 }
                    ]
                },
                // Tambahkan provinsi lainnya...
            ]
        };

        // Format angka
        function formatNumber(num) {
            return new Intl.NumberFormat('id-ID').format(num);
        }

        // Inisialisasi dashboard
        function initDashboard() {
            // Tampilkan total populasi
            document.getElementById('totalPopulation').textContent = 
                formatNumber(indonesiaData.totalPopulation);

            // Buat chart provinsi
            const provinceCtx = document.getElementById('provinceChart').getContext('2d');
            new Chart(provinceCtx, {
                type: 'bar',
                data: {
                    labels: indonesiaData.provinces.map(p => p.name),
                    datasets: [{
                        label: 'Population',
                        data: indonesiaData.provinces.map(p => p.population),
                        backgroundColor: '#2c3e50'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: (ctx) => `${ctx.label}: ${formatNumber(ctx.raw)} jiwa`
                            }
                        }
                    },
                    scales: {
                        y: {
                            ticks: {
                                callback: (v) => formatNumber(v)
                            }
                        }
                    }
                }
            });

            // Isi dropdown provinsi
            const provinceSelect = document.getElementById('provinceSelect');
            indonesiaData.provinces.forEach(province => {
                const option = document.createElement('option');
                option.value = province.name;
                option.textContent = province.name;
                provinceSelect.appendChild(option);
            });

            // Handle perubahan dropdown
            provinceSelect.addEventListener('change', (e) => {
                const selectedProvince = e.target.value;
                const province = indonesiaData.provinces.find(p => p.name === selectedProvince);
                
                const tbody = document.querySelector('#regencyTable tbody');
                tbody.innerHTML = province ? 
                    province.regencies.map(r => `
                        <tr>
                            <td>${r.name}</td>
                            <td>${formatNumber(r.population)}</td>
                        </tr>
                    `).join('') :
                    '<tr><td colspan="2">Select a province</td></tr>';
            });
        }

        // Jalankan inisialisasi
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>
